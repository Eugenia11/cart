{"ast":null,"code":"import _toConsumableArray from \"/home/evgeniya/shopping-cart-develop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/evgeniya/shopping-cart-develop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, ADD_QUANTITY, SUB_QUANTITY, REMOVE_ITEM, REMOVE_ITEMS } from '../constants/item';\nimport image1 from '../images/image1.jpg';\nimport image2 from '../images/image2.jpg';\nimport image3 from '../images/image3.jpg';\nimport image4 from '../images/image4.jpg';\nimport image5 from '../images/image5.jpg';\nimport image6 from '../images/image6.jpg';\nimport image7 from '../images/image7.jpg';\nimport image8 from '../images/image8.jpg';\nimport image9 from '../images/image9.jpg';\nimport image10 from '../images/image10.jpg';\nvar initialState = {\n  items: [{\n    id: 1,\n    title: 'Белое платье-миди с цельнокроеным рукавом',\n    price: 895,\n    image: image1\n  }, {\n    id: 2,\n    title: 'Платье-гольф черного цвета с потайной молнией',\n    price: 695,\n    image: image2\n  }, {\n    id: 3,\n    title: 'Обтягивающее платье бежевого цвета из стрейч-гипюра',\n    price: 695,\n    image: image3\n  }, {\n    id: 4,\n    title: 'Платье в серую клетку из костюмки с рукавами реглан ',\n    price: 695,\n    image: image4\n  }, {\n    id: 5,\n    title: 'Платье в тёмно-синюю клетку с расклешенной юбкой ',\n    price: 795,\n    image: image5\n  }, {\n    id: 6,\n    title: 'Синее платье с верхом из креп-шифона и принтованной юбкой',\n    price: 695,\n    image: image6\n  }, {\n    id: 7,\n    title: 'Серое платье свободного кроя с карманами ',\n    price: 595,\n    image: image7\n  }, {\n    id: 8,\n    title: 'Обтягивающее платье-миди пудрового цвета',\n    price: 695,\n    image: image8\n  }, {\n    id: 9,\n    title: 'Шифоновое платье с принтом и воротником-аскот зеленое',\n    price: 795,\n    image: image9\n  }, {\n    id: 10,\n    title: 'Платье с запахом чёрного цвета из креп-дайвинга',\n    price: 675,\n    image: image10\n  }],\n  addedItems: [],\n  total: 0\n};\n\nvar cartReducer = function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_TO_CART:\n      {\n        var addedItem = state.items.find(function (item) {\n          return item.id === action.id;\n        });\n        var existedItem = state.addedItems.find(function (item) {\n          return action.id === item.id;\n        });\n\n        if (existedItem) {\n          addedItem.quantity += 1;\n          addedItem.time = new Date();\n          var newTotal = state.total + addedItem.price;\n          var newCart = {\n            itemsInCart: state.addedItems,\n            totalPrice: newTotal\n          };\n          localStorage.setItem('cart', JSON.stringify(newCart));\n          return _objectSpread({}, state, {\n            total: state.total + addedItem.price\n          });\n        } else {\n          addedItem.quantity = 1;\n          addedItem.time = new Date();\n\n          var _newTotal = state.total + addedItem.price;\n\n          var _newCart = {\n            itemsInCart: [].concat(_toConsumableArray(state.addedItems), [addedItem]),\n            totalPrice: _newTotal\n          };\n          localStorage.setItem('cart', JSON.stringify(_newCart));\n          return _objectSpread({}, state, {\n            total: _newTotal,\n            addedItems: [].concat(_toConsumableArray(state.addedItems), [addedItem])\n          });\n        }\n      }\n\n    case ADD_QUANTITY:\n      {\n        var _addedItem = state.items.find(function (item) {\n          return item.id === action.id;\n        });\n\n        _addedItem.quantity += 1;\n\n        var _newTotal2 = state.total + _addedItem.price;\n\n        var _newCart2 = {\n          itemsInCart: state.addedItems,\n          totalPrice: _newTotal2\n        };\n        localStorage.setItem('cart', JSON.stringify(_newCart2));\n        return _objectSpread({}, state, {\n          total: _newTotal2\n        });\n      }\n\n    case SUB_QUANTITY:\n      {\n        var _addedItem2 = state.items.find(function (item) {\n          return item.id === action.id;\n        });\n\n        if (_addedItem2.quantity === 1) {\n          var newItems = state.addedItems.filter(function (item) {\n            return item.id !== action.id;\n          });\n          console.log(newItems);\n\n          var _newTotal3 = state.total - _addedItem2.price;\n\n          var _newCart3 = {\n            itemsInCart: newItems,\n            totalPrice: _newTotal3\n          };\n          localStorage.setItem('cart', JSON.stringify(_newCart3));\n          return _objectSpread({}, state, {\n            addedItems: newItems,\n            total: _newTotal3\n          });\n        } else {\n          _addedItem2.quantity -= 1;\n\n          var _newTotal4 = state.total - _addedItem2.price;\n\n          var _newCart4 = {\n            itemsInCart: state.addedItems,\n            totalPrice: _newTotal4\n          };\n          localStorage.setItem('cart', JSON.stringify(_newCart4));\n          return _objectSpread({}, state, {\n            total: _newTotal4\n          });\n        }\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/home/evgeniya/shopping-cart-develop/src/reducers/cartReducer.js"],"names":["ADD_TO_CART","ADD_QUANTITY","SUB_QUANTITY","REMOVE_ITEM","REMOVE_ITEMS","image1","image2","image3","image4","image5","image6","image7","image8","image9","image10","initialState","items","id","title","price","image","addedItems","total","cartReducer","state","action","type","addedItem","find","item","existedItem","quantity","time","Date","newTotal","newCart","itemsInCart","totalPrice","localStorage","setItem","JSON","stringify","newItems","filter","console","log"],"mappings":"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","sourcesContent":["import { ADD_TO_CART, ADD_QUANTITY, SUB_QUANTITY, REMOVE_ITEM, REMOVE_ITEMS } from '../constants/item';\n\nimport image1 from '../images/image1.jpg';\nimport image2 from '../images/image2.jpg';\nimport image3 from '../images/image3.jpg';\nimport image4 from '../images/image4.jpg';\nimport image5 from '../images/image5.jpg';\nimport image6 from '../images/image6.jpg';\nimport image7 from '../images/image7.jpg';\nimport image8 from '../images/image8.jpg';\nimport image9 from '../images/image9.jpg';\nimport image10 from '../images/image10.jpg';\n\nconst initialState = {\n    items: [\n        { id: 1, title: 'Белое платье-миди с цельнокроеным рукавом', price: 895, image: image1 },\n        { id: 2, title: 'Платье-гольф черного цвета с потайной молнией', price: 695, image: image2 },\n        { id: 3, title: 'Обтягивающее платье бежевого цвета из стрейч-гипюра', price: 695, image: image3 },\n        { id: 4, title: 'Платье в серую клетку из костюмки с рукавами реглан ', price: 695, image: image4 },\n        { id: 5, title: 'Платье в тёмно-синюю клетку с расклешенной юбкой ', price: 795, image: image5 },\n        { id: 6, title: 'Синее платье с верхом из креп-шифона и принтованной юбкой', price: 695, image: image6 },\n        { id: 7, title: 'Серое платье свободного кроя с карманами ', price: 595, image: image7 },\n        { id: 8, title: 'Обтягивающее платье-миди пудрового цвета', price: 695, image: image8 },\n        { id: 9, title: 'Шифоновое платье с принтом и воротником-аскот зеленое', price: 795, image: image9 },\n        { id: 10, title: 'Платье с запахом чёрного цвета из креп-дайвинга', price: 675, image: image10 },\n    ],\n    addedItems: [],\n    total: 0\n};\n\nconst cartReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_TO_CART: {\n            let addedItem = state.items.find(item => item.id === action.id);\n            let existedItem = state.addedItems.find(item => action.id === item.id);\n\n            if (existedItem) {\n                addedItem.quantity += 1;\n                addedItem.time = new Date();\n                let newTotal = state.total + addedItem.price;\n                let newCart = { itemsInCart: state.addedItems, totalPrice: newTotal };\n                localStorage.setItem('cart', JSON.stringify(newCart));\n                return { ...state, total: state.total + addedItem.price };\n            } else {\n                addedItem.quantity = 1;\n                addedItem.time = new Date();\n                let newTotal = state.total + addedItem.price;\n                let newCart = { itemsInCart: [...state.addedItems, addedItem], totalPrice: newTotal };\n                localStorage.setItem('cart', JSON.stringify(newCart));\n                return { ...state, total: newTotal, addedItems: [...state.addedItems, addedItem] }\n            }\n        }\n        case ADD_QUANTITY: {\n            let addedItem = state.items.find(item => item.id === action.id);\n            addedItem.quantity += 1;\n            let newTotal = state.total + addedItem.price;\n            let newCart = { itemsInCart: state.addedItems, totalPrice: newTotal };\n            localStorage.setItem('cart', JSON.stringify(newCart));\n            return { ...state, total: newTotal }\n        }\n\n        case SUB_QUANTITY: {\n            let addedItem = state.items.find(item => item.id === action.id)\n            if (addedItem.quantity === 1) {\n                let newItems = state.addedItems.filter(item => item.id !== action.id);\n                console.log(newItems);\n                let newTotal = state.total - addedItem.price\n                let newCart = { itemsInCart: newItems, totalPrice: newTotal };\n                localStorage.setItem('cart', JSON.stringify(newCart));\n                return { ...state, addedItems: newItems, total: newTotal }\n            }\n            else {\n                addedItem.quantity -= 1;\n                let newTotal = state.total - addedItem.price;\n                let newCart = { itemsInCart: state.addedItems, totalPrice: newTotal };\n                localStorage.setItem('cart', JSON.stringify(newCart));\n                return { ...state, total: newTotal }\n            }\n        }\n\n        default:\n            return state;\n    }\n}\n\nexport default cartReducer;"]},"metadata":{},"sourceType":"module"}